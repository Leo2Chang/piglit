[require]
GLSL >= 1.20

[vertex shader]
#version 120
float f(out int x)
{
  x = 4;
  return 0.5;
}

void main()
{
  gl_Position = gl_Vertex;
  float value1;
  float value2 = f(value1);
  gl_FrontColor = vec4(1.0/value1, value2, 0.0, 0.0);
}

[fragment shader]
void main()
{
  gl_FragColor = gl_Color;
}

[test]
draw rect -1 -1 2 2
probe all rgba 0.25 0.5 0.0 0.0
